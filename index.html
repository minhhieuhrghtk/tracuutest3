<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tra c·ª©u b√†n ti·ªác</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: radial-gradient(circle at top, #fdf2f8, #c7d2fe);
      min-height: 100vh;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      background: #ffffff;
      max-width: 520px;
      width: 100%;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      overflow: hidden;
    }
    header {
      background: linear-gradient(135deg, #ec4899, #8b5cf6);
      color: white;
      padding: 18px;
      text-align: center;
    }
    .content { padding: 18px; }
    input, button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 12px;
      border: 1px solid #d1d5db;
      box-sizing: border-box;
    }
    button {
      margin-top: 10px;
      background: linear-gradient(135deg, #8b5cf6, #6366f1);
      color: white;
      border: none;
      cursor: pointer;
    }
    .result { margin-top: 14px; }
    .error { color: #dc2626; text-align:center; }

    /* ===== S∆† ƒê·ªí S√ÇN KH·∫§U B·∫∞NG CODE ===== */
    .stage { background:#ef4444; color:white; text-align:center; padding:6px; font-weight:600; border-radius:8px; }
    .entrance { background:#facc15; text-align:center; padding:6px; border-radius:8px; margin-top:8px; font-weight:600; }
    .hall { margin-top:12px; }
    .row { display:flex; align-items:center; margin-bottom:6px; }
    .row-label { width:60px; font-size:12px; }
    .lanes { display:flex; flex:1; justify-content:space-around; }
    .table {
      width:60px;
      height:32px;
      background:#d1fae5;
      border-radius:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:13px;
      border:2px solid transparent;
    }
    .table.highlight {
      border-color:#ef4444;
      box-shadow:0 0 10px rgba(239,68,68,0.9);
      animation:pulse 1.2s infinite;
      background:#fee2e2;
    }
    @keyframes pulse {
      0% { transform:scale(1); }
      50% { transform:scale(1.1); }
      100% { transform:scale(1); }
    }
    footer { text-align:center; padding:12px; font-size:12px; color:#6b7280; background:#fafafa; }
  </style>
</head>
<body>
<div class="container">
  <header>
    <h3>üå∏ Tra c·ª©u b√†n ti·ªác üå∏</h3>
    <p>Nh·∫≠p t√™n ƒë·ªÉ xem v·ªã tr√≠ ng·ªìi</p>
  </header>

  <div class="content">
    <input id="username" placeholder="V√≠ d·ª•: an, binh..." onkeydown="if(event.key==='Enter') traCuu()" />
    <button onclick="traCuu()">Tra c·ª©u</button>
    <div id="result"></div>

    <div class="hall" id="hall">
      <div class="stage">S√ÇN KH·∫§U TI·ªÜC</div>

      <div class="row"><div class="row-label">H√ÄNG 1</div><div class="lanes"><div class="table" data-ban="1">1</div><div class="table" data-ban="2">2</div><div class="table" data-ban="3">3</div></div></div>
      <div class="row"><div class="row-label">H√ÄNG 2</div><div class="lanes"><div class="table" data-ban="4">4</div><div class="table" data-ban="5">5</div><div class="table" data-ban="6">6</div></div></div>
      <div class="row"><div class="row-label">H√ÄNG 3</div><div class="lanes"><div class="table" data-ban="7">7</div><div class="table" data-ban="8">8</div><div class="table" data-ban="9">9</div></div></div>
      <div class="row"><div class="row-label">H√ÄNG 4</div><div class="lanes"><div class="table" data-ban="10">10</div><div class="table" data-ban="11">11</div><div class="table" data-ban="12">12</div></div></div>

      <div class="entrance">C·ª¨A RA V√ÄO</div>
    </div>
  </div>

  <footer>Vui l√≤ng t√¨m b√†n ƒë∆∞·ª£c t√¥ s√°ng</footer>
</div>

<script>
  const SHEET_URL = "PASTE_GOOGLE_SHEET_CSV_URL_HERE";
  const data = {};
  const resultDiv = document.getElementById('result');

  fetch(SHEET_URL)
    .then(res => res.text())
    .then(text => {
      text.trim().split(/\r?\n/).forEach(line => {
        const [user, ban] = line.split(',');
        if (user && ban) data[user.trim().toLowerCase()] = ban.trim();
      });
    });

  function traCuu() {
    document.querySelectorAll('.table').forEach(t => t.classList.remove('highlight'));

    const user = document.getElementById('username').value.trim().toLowerCase();
    const ban = data[user];

    if (!ban) {
      resultDiv.innerHTML = '<div class="error">‚ùå Kh√¥ng t√¨m th·∫•y th√¥ng tin</div>';
      return;
    }

    const table = document.querySelector(`.table[data-ban="${ban}"]`);
    if (table) table.classList.add('highlight');

    resultDiv.innerHTML = `<div style="text-align:center; margin-top:8px;">üéâ <b>${user}</b> ‚Äì B√†n <b>${ban}</b></div>`;
  }
</script>
</body>
</html>